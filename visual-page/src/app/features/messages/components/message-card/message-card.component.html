<div class="message-card"
     [class.unread]="!message.isRead"
     [class]="getPriorityClass()"
     (click)="onMessageClick()">
  <div class="message-avatar">
    @if (message.senderAvatar) {
      <img [src]="message.senderAvatar" [alt]="message.sender" class="avatar-img">
    } @else {
      <div class="avatar-placeholder">
        {{ getInitials(message.sender) }}
      </div>
    }
  </div>

  <div class="message-content">
    <div class="message-header">
      <div class="message-info">
        <span class="sender-name">{{ message.sender }}</span>
        @if (!message.isRead) {
          <span class="unread-badge"></span>
        }
      </div>
      <span class="message-time">{{ getTimeAgo(message.timestamp) }}</span>
    </div>

    <div class="message-subject">{{ message.subject }}</div>
    <div class="message-preview">{{ message.preview }}</div>

    <div class="message-footer">
      @if (message.category) {
        <span class="message-category">{{ message.category }}</span>
      }
      @if (message.priority === 'high') {
        <span class="priority-badge">
          <i class="material-icons">priority_high</i>
          Alta prioridad
        </span>
      }
    </div>
  </div>
</div>
